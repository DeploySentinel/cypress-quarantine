{"code":"import { __assign, __awaiter, __generator, __read } from \"tslib\";\r\nimport axios from 'axios';\r\nimport axiosRetry, { exponentialDelay, isNetworkError, isRetryableError, } from 'axios-retry';\r\nimport isObject from 'lodash/isObject';\r\nimport isPlainObject from 'lodash/isPlainObject';\r\nimport pick from 'lodash/pick';\r\nimport safeStringify from 'fast-safe-stringify';\r\nimport { strFromU8, strToU8, zlibSync } from 'fflate';\r\n// COMPATIBLE WITH BOTH NODE AND BROWSER\r\nexport var DEFAULT_DS_TASK_TIMEOUT = 60000; // 60 secs\r\nexport var NETWORK_MOCKS_CACHE_FOLDER_NAME = '.ds-network-cache';\r\n// WARNING: be sure to version this on the api side (check 'getCompressionAlgoVersion')\r\nexport var pack = function (input) {\r\n    return strFromU8(zlibSync(strToU8(input)), true);\r\n};\r\nexport var shouldAttachDebugger = function (apiKey) { return Boolean(apiKey); };\r\nexport var isBrowser = function () { return typeof window !== 'undefined'; };\r\nexport var useTry = function (fn) {\r\n    var output = null;\r\n    var error = null;\r\n    try {\r\n        output = fn();\r\n        return [error, output];\r\n    }\r\n    catch (e) {\r\n        error = e;\r\n        return [error, output];\r\n    }\r\n};\r\n// only used in jsonStringify\r\nexport var tryJSONStringify = function (json) {\r\n    var _a = __read(useTry(function () { return JSON.stringify(json); }), 2), _ = _a[0], result = _a[1];\r\n    return result;\r\n};\r\nexport var jsonStringifyReplacer = function (key, value) {\r\n    if (value === '[Circular]' || value === '[...]') {\r\n        return;\r\n    }\r\n    return value;\r\n};\r\nexport var jsonStringify = function (json) {\r\n    return useTry(function () {\r\n        var _a;\r\n        return (_a = tryJSONStringify(json)) !== null && _a !== void 0 ? _a : safeStringify(json, jsonStringifyReplacer, undefined, {\r\n            depthLimit: 1024,\r\n            edgesLimit: 1024 * 1024,\r\n        });\r\n    });\r\n};\r\nexport var stringifyAndPackArtifacts = function (events, logger, logPrefix) {\r\n    var clonedEvents = null;\r\n    // 1st try\r\n    var clonedEvents1 = tryJSONStringify({ events: events });\r\n    // 2nd try\r\n    if (clonedEvents1 === null) {\r\n        var ts = performanceNow();\r\n        var eventsLength = events.length;\r\n        logger.info({\r\n            location: \"\".concat(logPrefix, \":stringifyAndPackArtifacts:before:jsonStringify\"),\r\n            message: 'log progress',\r\n            meta: {\r\n                eventsLength: eventsLength,\r\n            },\r\n        });\r\n        var filteredEvents = events.map(function (evt) {\r\n            var singleEvent = tryJSONStringify(evt);\r\n            if (singleEvent === null) {\r\n                return __assign(__assign({}, evt), { data: filterNonPrimitiveValues(evt.data) });\r\n            }\r\n            return evt;\r\n        });\r\n        var _a = __read(jsonStringify({\r\n            events: filteredEvents,\r\n        }), 2), error2 = _a[0], clonedEvents2 = _a[1];\r\n        logger.info({\r\n            location: \"\".concat(logPrefix, \":stringifyAndPackArtifacts:after:jsonStringify\"),\r\n            message: 'log progress',\r\n            meta: {\r\n                size: clonedEvents2 === null || clonedEvents2 === void 0 ? void 0 : clonedEvents2.length,\r\n                took: performanceNow() - ts,\r\n            },\r\n        });\r\n        if (error2 !== null) {\r\n            logger.error({\r\n                location: \"\".concat(logPrefix, \":stringifyAndPackArtifacts:after:jsonStringify\"),\r\n                message: error2,\r\n            });\r\n        }\r\n        clonedEvents = clonedEvents2;\r\n    }\r\n    else {\r\n        clonedEvents = clonedEvents1;\r\n    }\r\n    if (clonedEvents) {\r\n        var _b = __read(useTry(function () {\r\n            return pack(clonedEvents);\r\n        }), 2), packError = _b[0], packResults = _b[1];\r\n        if (packError) {\r\n            logger.error({\r\n                location: \"\".concat(logPrefix, \":stringifyAndPackArtifacts:after:pack\"),\r\n                message: packError,\r\n            });\r\n        }\r\n        else if (packResults !== null) {\r\n            return packResults;\r\n        }\r\n    }\r\n    return null;\r\n};\r\nvar EventsHandler = /** @class */ (function () {\r\n    function EventsHandler() {\r\n        this.currentEventIndex = 0;\r\n        this.events = [];\r\n        this.eventIndexLookupMap = new Map();\r\n    }\r\n    EventsHandler.prototype.clear = function () {\r\n        this.events.length = 0;\r\n        this.currentEventIndex = 0;\r\n        this.eventIndexLookupMap.clear();\r\n    };\r\n    EventsHandler.prototype.get = function () {\r\n        return this.events;\r\n    };\r\n    EventsHandler.prototype.push = function (event) {\r\n        this.eventIndexLookupMap.set(event.id, this.currentEventIndex);\r\n        this.events.push(event);\r\n        this.currentEventIndex += 1;\r\n    };\r\n    EventsHandler.prototype.update = function (newEvent) {\r\n        var targetIndex = this.eventIndexLookupMap.get(newEvent.id);\r\n        if (targetIndex !== undefined) {\r\n            var targetEvent = this.events[targetIndex];\r\n            if ((targetEvent === null || targetEvent === void 0 ? void 0 : targetEvent.id) === newEvent.id) {\r\n                this.events[targetIndex] = newEvent;\r\n            }\r\n        }\r\n    };\r\n    return EventsHandler;\r\n}());\r\nexport { EventsHandler };\r\nexport var createRandomID = function () {\r\n    try {\r\n        if (isBrowser()) {\r\n            return window.crypto.randomUUID();\r\n        }\r\n        var crypto_1 = require('crypto');\r\n        return crypto_1.randomUUID();\r\n    }\r\n    catch (e) {\r\n        // not very secure\r\n        var dt_1 = new Date().getTime();\r\n        var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n            var r = (dt_1 + Math.random() * 16) % 16 | 0;\r\n            dt_1 = Math.floor(dt_1 / 16);\r\n            return (c == 'x' ? r : (r & 0x3) | 0x8).toString(16);\r\n        });\r\n        return uuid;\r\n    }\r\n};\r\nexport var performanceNow = function () {\r\n    try {\r\n        if (isBrowser()) {\r\n            return window.performance.now();\r\n        }\r\n        var performance_1 = require('perf_hooks').performance;\r\n        return performance_1.now();\r\n    }\r\n    catch (e) {\r\n        return 0;\r\n    }\r\n};\r\n// WARNING: only for testing purpose\r\nexport var blockForAWhile = function () {\r\n    for (var i = 0; i < 1000000; i++) {\r\n        createRandomID();\r\n    }\r\n};\r\nexport var createDeploySentinelEvent = function (type, data, error) { return ({\r\n    data: data,\r\n    id: createRandomID(),\r\n    type: type,\r\n    offset: performanceNow(),\r\n    ts: Date.now(),\r\n    error: error,\r\n}); };\r\n// not used\r\nexport var sleep = function (ms) {\r\n    return new Promise(function (resolve) { return setTimeout(resolve, ms); });\r\n};\r\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Cyclic_object_value\r\nexport var getCircularReplacer = function () {\r\n    var seen = new WeakSet();\r\n    return function (_, value) {\r\n        if (typeof value === 'object' && value !== null) {\r\n            if (seen.has(value)) {\r\n                return;\r\n            }\r\n            seen.add(value);\r\n        }\r\n        return value;\r\n    };\r\n};\r\nexport var parseJsonString = function (input) {\r\n    var _a = __read(useTry(function () { return JSON.parse(input); }), 2), _ = _a[0], output = _a[1];\r\n    return output !== null && output !== void 0 ? output : input;\r\n};\r\nexport var HTTP_METHODS = [\r\n    'GET',\r\n    'HEAD',\r\n    'POST',\r\n    'PUT',\r\n    'DELETE',\r\n    'CONNECT',\r\n    'OPTIONS',\r\n    'TRACE',\r\n    'PATCH',\r\n];\r\nexport var validators = {\r\n    isNullish: function (input) { return input == null; },\r\n    isInteger: function (input) { return Number.isInteger(input); },\r\n    isObject: function (input) { return typeof input === 'object' && input !== null; },\r\n    isString: function (input) {\r\n        return typeof input === 'string' || input instanceof String;\r\n    },\r\n    isHTTPMethod: function (input) { return HTTP_METHODS.includes(input); },\r\n    isBoolean: function (input) { return 'boolean' === typeof input; },\r\n    isPrimitive: function (input) { return !isObject(input); },\r\n    isJsonString: function (input) {\r\n        try {\r\n            JSON.parse(input);\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n};\r\nexport var filterNonPrimitiveValues = function (input) {\r\n    if (!isPlainObject(input)) {\r\n        return input;\r\n    }\r\n    var keysToPick = Object.keys(input).filter(function (key) {\r\n        return validators.isPrimitive(input[key]);\r\n    });\r\n    return pick(input, keysToPick);\r\n};\r\nexport var REQUEST_TIMEOUT = 60000;\r\nexport var MAX_API_RETRIES = 3;\r\nexport var buildAxiosInstance = function (config) {\r\n    // patch headers\r\n    config.headers = __assign(__assign({}, config.headers), { 'x-msw-bypass': 'true' });\r\n    var instance = axios.create(config);\r\n    axiosRetry(instance, {\r\n        retries: MAX_API_RETRIES,\r\n        retryDelay: exponentialDelay,\r\n        retryCondition: function (error) {\r\n            if (isNetworkError(error)) {\r\n                return true;\r\n            }\r\n            if (!error.config) {\r\n                // Cannot determine if the request can be retried\r\n                return false;\r\n            }\r\n            return isRetryableError(error);\r\n        },\r\n    });\r\n    return instance;\r\n};\r\nexport var uploadToS3 = function (_a) {\r\n    var url = _a.url, artifacts = _a.artifacts, logger = _a.logger;\r\n    return __awaiter(void 0, void 0, void 0, function () {\r\n        var artifactsSize, ts, axiosInstance, e_1;\r\n        var _b;\r\n        return __generator(this, function (_c) {\r\n            switch (_c.label) {\r\n                case 0:\r\n                    if (!url) return [3 /*break*/, 4];\r\n                    artifactsSize = (_b = artifacts === null || artifacts === void 0 ? void 0 : artifacts.length) !== null && _b !== void 0 ? _b : 0;\r\n                    ts = performanceNow();\r\n                    _c.label = 1;\r\n                case 1:\r\n                    _c.trys.push([1, 3, , 4]);\r\n                    if (artifactsSize === 0 || artifactsSize > 64 * 1e6) {\r\n                        throw new Error(\"Invalid artifacts size: \".concat(artifactsSize, \" bytes\"));\r\n                    }\r\n                    axiosInstance = buildAxiosInstance({\r\n                        timeout: REQUEST_TIMEOUT,\r\n                        maxContentLength: Infinity,\r\n                        maxBodyLength: Infinity,\r\n                    });\r\n                    return [4 /*yield*/, axiosInstance.put(url, artifacts)];\r\n                case 2:\r\n                    _c.sent();\r\n                    logger === null || logger === void 0 ? void 0 : logger.info({\r\n                        location: 'axios:uploadToS3',\r\n                        message: 'finished uploading artifacts',\r\n                        meta: {\r\n                            url: url,\r\n                            took: performanceNow() - ts,\r\n                        },\r\n                    });\r\n                    return [3 /*break*/, 4];\r\n                case 3:\r\n                    e_1 = _c.sent();\r\n                    console.log(e_1);\r\n                    logger === null || logger === void 0 ? void 0 : logger.error({\r\n                        location: 'axios:uploadToS3',\r\n                        message: e_1,\r\n                        meta: {\r\n                            url: url,\r\n                            took: performanceNow() - ts,\r\n                        },\r\n                    });\r\n                    return [3 /*break*/, 4];\r\n                case 4: return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n};\r\n//# sourceMappingURL=shared.js.map","references":["/home/warren/Codes/deploysentinel/cypress-quarantine/node_modules/axios/index.d.ts","/home/warren/Codes/deploysentinel/cypress-quarantine/node_modules/axios-retry/index.d.ts","/home/warren/Codes/deploysentinel/cypress-quarantine/node_modules/@types/lodash/isObject.d.ts","/home/warren/Codes/deploysentinel/cypress-quarantine/node_modules/@types/lodash/isPlainObject.d.ts","/home/warren/Codes/deploysentinel/cypress-quarantine/node_modules/@types/lodash/pick.d.ts","/home/warren/Codes/deploysentinel/cypress-quarantine/node_modules/fast-safe-stringify/index.d.ts","/home/warren/Codes/deploysentinel/cypress-quarantine/node_modules/fflate/lib/index.d.ts","/home/warren/Codes/deploysentinel/cypress-quarantine/src/clients/api.ts","/home/warren/Codes/deploysentinel/cypress-quarantine/src/types.ts"],"map":"{\"version\":3,\"file\":\"shared.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/utils/shared.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/warren/Codes/deploysentinel/cypress-quarantine/node_modules/.cache/rollup-plugin-typescript2/placeholder/src/utils/shared.d.ts","writeByteOrderMark":false,"text":"import { AxiosRequestConfig } from 'axios';\r\nimport { Logger } from '../clients/api';\r\nimport { DSEvent, DSEventError, DeploySentienlEventType } from '../types';\r\nexport declare const DEFAULT_DS_TASK_TIMEOUT = 60000;\r\nexport declare const NETWORK_MOCKS_CACHE_FOLDER_NAME = \".ds-network-cache\";\r\nexport declare const pack: (input: string) => string;\r\nexport declare const shouldAttachDebugger: (apiKey?: string) => boolean;\r\nexport declare const isBrowser: () => boolean;\r\nexport declare const useTry: <T>(fn: () => T) => [unknown, T | null];\r\nexport declare const tryJSONStringify: (json: Record<string, unknown> | Record<string, unknown>[]) => string | null;\r\nexport declare const jsonStringifyReplacer: (key: string, value: unknown) => unknown;\r\nexport declare const jsonStringify: (json: Record<string, unknown> | Record<string, unknown>[]) => [unknown, string | null];\r\nexport declare const stringifyAndPackArtifacts: (events: DSEvent[], logger: Logger, logPrefix?: string) => string | null;\r\nexport declare class EventsHandler {\r\n    private currentEventIndex;\r\n    protected readonly events: DSEvent[];\r\n    protected readonly eventIndexLookupMap: Map<string, number>;\r\n    clear(): void;\r\n    get(): DSEvent[];\r\n    push(event: DSEvent): void;\r\n    update(newEvent: DSEvent): void;\r\n}\r\nexport declare const createRandomID: () => any;\r\nexport declare const performanceNow: () => any;\r\nexport declare const blockForAWhile: () => void;\r\nexport declare const createDeploySentinelEvent: (type: DeploySentienlEventType, data: any, error?: DSEventError) => {\r\n    data: any;\r\n    id: any;\r\n    type: DeploySentienlEventType;\r\n    offset: any;\r\n    ts: number;\r\n    error: DSEventError | undefined;\r\n};\r\nexport declare const sleep: (ms: number) => Promise<unknown>;\r\nexport declare const getCircularReplacer: () => (_: string, value: unknown) => unknown;\r\nexport declare const parseJsonString: (input: string) => string | Record<string, any>;\r\nexport declare const HTTP_METHODS: string[];\r\nexport declare const validators: {\r\n    isNullish: (input: unknown) => boolean;\r\n    isInteger: (input: unknown) => boolean;\r\n    isObject: (input: unknown) => boolean;\r\n    isString: (input: unknown) => boolean;\r\n    isHTTPMethod: (input: string) => boolean;\r\n    isBoolean: (input: unknown) => boolean;\r\n    isPrimitive: (input: unknown) => boolean;\r\n    isJsonString: (input: string) => boolean;\r\n};\r\nexport declare const filterNonPrimitiveValues: (input: Record<string, unknown>) => Record<string, unknown>;\r\nexport declare const REQUEST_TIMEOUT = 60000;\r\nexport declare const MAX_API_RETRIES = 3;\r\nexport declare const buildAxiosInstance: (config: AxiosRequestConfig) => import(\"axios\").AxiosInstance;\r\nexport declare const uploadToS3: ({ url, artifacts, logger, }: {\r\n    url?: string | null | undefined;\r\n    artifacts: string | null;\r\n    logger?: Logger | undefined;\r\n}) => Promise<void>;\r\n"}}
